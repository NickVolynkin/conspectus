# Аварии помогают учиться

<p align="right">
<a href = "https://ritfest.ru/"><img src = "https://pbs.twimg.com/profile_images/986564000828751877/j_1x0CAt.jpg" width="20px" height=20px"> РИТ 2019</a> 
</p>


**Алексей Кирпичников (СКБ Контур)**

[Слайды]()

- [Вступление](#Вступление)
- [Что такое факап](#Что_такое_факап)
- [Как получить пользу от факапа](#Как_получить_пользу_от_факапа)
- [Метод прогрессивного джипега](#Метод_прогрессивного_джипега)

## Вступление

* Я с самого прихода в компанию (5 лет) веду блокнот, где записываю, что можно улучшить в наших процессах в инфраструктурой команде. Что там есть? Мониторинг. Автодеплой. Постмортемы. 
* Если что-то произошло в продакшн, какой-то факап, давайте это опишем, разберем причины и ошибки и вместе изменим наши процессы разработки, тестирования, CI, чтобы таких инцидентов больше не было. 
* Из всех этих практик написание постмортемов оказалось самой сложной для внедрения инженерной практикой. Инженеры не очень любят писать отчеты, но в этой практике очень много полезного. 

## Что такое факап
 
* Что такое факап? Блог платформа потеряла все записи одного пользователя из миллиона. Сервис для офисных работников, сервис два часа подряд ночью с субботы на воскресенье не работал. У вас есть Grafana, она не работала 15 минут, ничего не сломалось, но графики не было видно. 
* По версии pagerduty, инцидент - любой незапланированный перерыв в работе сервиса, которые отразился на пользователях. 
* Пользователи заметили, потеряны любые данные, потребовалось вмешательство дежурного, решение заняло слишком много времени или не сработал мониторинг. 
* Добавлю от себя: заметили внешние или внутренние пользователи, повезло, а в следующий раз может не повезти, инцидент касается нескольких команд, хотя бы один инженер считает это факапом. 
* Разбор инцидента - это отличная площадка для сотрудничества многих команд, обмена опытом, общения. 

 ## Как получить пользу от факапа
 
* Вредные советы - искрит виноватых, закрывать доступ в прод, увольнять.
* Постмортем - не поиск виноватого! Доверие к сотрудникам. 

* **Инструкция от Джона Олспо**. Книга Blameless postmortems and adjust culture. 
* Спросите, какие события наблюдали
* Когда и какие действия предпринимали
* Какого результата ожидали
* Из каких предположений исходили
* Как понимаю последовательность событий
* Спрашивайте без угрозы наказания!
* Нам нужны правдивые ответы на вопросы. 
* Отчет об инциденте - это обратная связь. 
* Заставить инженеров поверить, что это нужно и важно. 

## Метод прогрессивного джипега 
Существует простой способ организации времени. Называется метод прогрессивного джипега. В любую секунду любой проект готов на 100%, хотя проработанность может быть и на 4%.

В зависимости от имеющегося времени проект можно прорабатывать до пикселя, а можно оставить на стадии концептуальной зарисовки.
